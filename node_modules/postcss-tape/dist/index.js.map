{"version":3,"file":"index.js","sources":["../src/lib/exit.js","../src/lib/utils.js","../src/lib/get-error-message.js","../src/lib/get-options-from-arguments.js","../src/lib/get-options.js","../src/lib/color.js","../src/lib/log.js","../src/index.js"],"sourcesContent":["/** Exit the process logging an error and with a failing exit code. */\nexport const fail = (error) => {\n\tconsole.log(error)\n\n\tprocess.exit(1)\n}\n\n/** Exit the process with a passing exit code. */\nexport const pass = () => {\n\tprocess.exit(0)\n}\n","import fs from 'fs'\n\n/** Reads a file and returns its string content */\nexport const readFile = (/** @type {string} */ pathname) => /** @type {Promise<string>} */ (\n\tnew Promise((resolve, reject) => {\n\t\tfs.readFile(pathname, 'utf8', (error, data) => {\n\t\t\tif (error) {\n\t\t\t\treject(error)\n\t\t\t} else {\n\t\t\t\tresolve(data)\n\t\t\t}\n\t\t})\n\t})\n)\n\n/** Returns a value from a JSON file. */\nexport const readJSON = (/** @type {string} */ pathname, /** @type {string[]} */ ...keys) => readFile(pathname).then(JSON.parse).then(\n\topts => (\n\t\tkeys.length\n\t\t\t? opts[\n\t\t\t\tObject.keys(opts).find(key => keys.includes(key))\n\t\t\t]\n\t\t: opts\n\t)\n)\n\n/** Returns the string content of a file if it exists, and otherwise creates the file and returns an empty string. */\nexport const readOrWriteFile = (/** @type {string} */ pathname, /** @type {string} */ data) => readFile(pathname).catch(\n\t() => writeFile(pathname, data || '').then(() => '')\n)\n\n/** Reads a file without throwing for any reason. */\nexport const safelyReadFile = (/** @type {string} */ pathname) => readFile(pathname).catch(() => '')\n\n/** Writes a file. */\nexport const writeFile = (/** @type {string} */ pathname, /** @type {string} */ data) => new Promise((resolve, reject) => {\n\tfs.writeFile(pathname, data, (error) => {\n\t\tif (error) {\n\t\t\treject(error)\n\t\t} else {\n\t\t\tresolve()\n\t\t}\n\t})\n})\n","/** Return the error message. */\nexport const getErrorMessage = (/** @type {Error | string} */ error) => String(\n\tObject(error).message || error\n)\n","const argRegExp = /^--([\\w-]+)$/\nconst primativeRegExp = /^(false|null|true|undefined|(\\d+\\.)?\\d+|\\{.*\\}|\\[.*\\])$/\nconst relaxedJsonPropRegExp = /(['\"])?([a-z0-9A-Z_]+)\\1:/g\nconst relaxedJsonValueRegExp = /(\"[a-z0-9A-Z_]+\":\\s*)(?!true|false|null|\\d+)'?([A-z0-9]+)'?([,}])/g\n\n/** Return an object of options from a CLI array of arguments. */\nexport const getOptionsFromArguments = (/** @type {object} */ defaultOptions) => process.argv.slice(2).reduce(\n\t(/** @type {object} */ args, /** @type {string} */ arg, /** @type {number} */ index, /** @type {object} */ argv) => {\n\t\tconst nextIndex = index + 1\n\t\tconst nextArg = argv[nextIndex]\n\t\tconst argMatch = arg.match(argRegExp)\n\n\t\tif (argMatch) {\n\t\t\tconst [, name] = argMatch\n\n\t\t\tif (!nextArg || argRegExp.test(nextArg)) {\n\t\t\t\targs[name] = true\n\t\t\t} else {\n\t\t\t\targs[name] = primativeRegExp.test(nextArg)\n\t\t\t\t\t? JSON.parse(\n\t\t\t\t\t\tnextArg\n\t\t\t\t\t\t.replace(relaxedJsonPropRegExp, '\"$2\": ')\n\t\t\t\t\t\t.replace(relaxedJsonValueRegExp, '$1\"$2\"$3')\n\t\t\t\t\t)\n\t\t\t\t: nextArg\n\t\t\t}\n\t\t}\n\n\t\treturn args\n\t},\n\tObject.assign({}, defaultOptions)\n)\n","import { getOptionsFromArguments } from './get-options-from-arguments.js'\nimport { readJSON } from './utils.js'\nimport path from 'path'\n\n/** Asynchronously return the options from the project. */\nexport const getOptions = async () => {\n\tconst cwd = process.cwd()\n\n\t// default options\n\tconst defaultOptions = {\n\t\tplugin: cwd,\n\t\tconfig: cwd,\n\t\tfixtures: path.resolve(cwd, 'test'),\n\t}\n\n\tconst options = await readJSON('package.json', 'postcss', 'postcssConfig').then(packageOptions => getOptionsFromArguments(Object.assign(defaultOptions, packageOptions)))\n\n\tconst importedPluginFile = path.resolve(options.plugin)\n\tconst importedPlugin = await import(importedPluginFile)\n\n\toptions.plugin = importedPlugin\n\n\tif (path.extname(options.config)) {\n\t\tconst importedConfig = await import(path.resolve(options.config))\n\n\t\toptions.config = importedConfig.default || importedConfig\n\n\t\treturn options\n\t} else {\n\t\tconst postcssTapeConfigFiles = [\n\t\t\t'postcss-tape.config.js',\n\t\t\t'postcss-tape.config.mjs',\n\t\t\t'postcss-tape.config.cjs',\n\t\t\t'.tape.js',\n\t\t\t'.tape.mjs',\n\t\t\t'.tape.cjs'\n\t\t]\n\n\t\tlet returnError\n\n\t\twhile (postcssTapeConfigFiles.length) {\n\t\t\tconst postcssTapeConfigFile = path.resolve(options.config, postcssTapeConfigFiles.shift())\n\n\t\t\ttry {\n\t\t\t\tconst importedConfig = await import(postcssTapeConfigFile)\n\t\t\t\toptions.config = importedConfig.default || importedConfig\n\t\t\t\treturn options\n\t\t\t} catch (error) {\n\t\t\t\tif (!returnError) returnError = error\n\t\t\t\tcontinue\n\t\t\t}\n\t\t}\n\n\t\tthrow returnError\n\t}\n}\n","/** Color keys. */\nconst colors = {\n\treset: '\\x1b[0m',\n\tbold: '\\x1b[1m',\n\tdim: '\\x1b[2m',\n\tunderline: '\\x1b[4m',\n\tblink: '\\x1b[5m',\n\treverse: '\\x1b[7m',\n\thidden: '\\x1b[8m',\n\tblack: '\\x1b[30m',\n\tred: '\\x1b[31m',\n\tgreen: '\\x1b[32m',\n\tyellow: '\\x1b[33m',\n\tblue: '\\x1b[34m',\n\tmagenta: '\\x1b[35m',\n\tcyan: '\\x1b[36m',\n\twhite: '\\x1b[37m',\n\tbgBlack: '\\x1b[40m',\n\tbgRed: '\\x1b[41m',\n\tbgGreen: '\\x1b[42m',\n\tbgYellow: '\\x1b[43m',\n\tbgBlue: '\\x1b[44m',\n\tbgMagenta: '\\x1b[45m',\n\tbgCyan: '\\x1b[46m',\n\tbgWhite: '\\x1b[47m'\n}\n\n/** Return a string wrapped in a CLI color. */\nexport const color = (/** @type {keyof colors} */ name, /** @type {string} */ string) => (\n\tcolors[name] +\n\tstring.replace(colors.reset, colors.reset + colors[name]) +\n\tcolors.reset\n)\n","import { color } from './color.js'\nimport readline from 'readline'\n\n// symbols\nconst isWin32 = process.platform === 'win32'\nconst tick    = isWin32 ? '√' : '✔'\nconst cross   = isWin32 ? '×' : '✖'\nconst stdout  = process.stdout\n\nlet interval\n\n/** Log as a passing state. */\nexport const pass = (/** @type {string} */ name, /** @type {string} */ message, /** @type {boolean} */ ci) => {\n\tclearInterval(interval)\n\n\tif (ci) {\n\t\tstdout.write(` ${color('green', tick)}\\n`)\n\t} else {\n\t\t// reset current stream line\n\t\treadline.clearLine(stdout, 0)\n\t\treadline.cursorTo(stdout, 0)\n\n\t\tstdout.write(`${color('green', tick)} ${name} ${color('dim', message)}\\n`)\n\t}\n}\n\n/** Log as a failing state. */\nexport const fail = (/** @type {string} */ name, /** @type {string} */ message, /** @type {string} */ details, /** @type {boolean} */ ci) => {\n\tclearInterval(interval)\n\n\tif (ci) {\n\t\tstdout.write(` ${color('red', cross)}\\n${details}\\n`)\n\t} else {\n\t\t// reset current stream line\n\t\treadline.clearLine(stdout, 0)\n\t\treadline.cursorTo(stdout, 0)\n\n\t\tstdout.write(`${color('red', cross)} ${name} ${color('dim', message)}\\n${details}\\n`)\n\t}\n}\n\n/** Log as a waiting state. */\nexport const wait = (/** @type {string} */ name, /** @type {string} */ message, /** @type {boolean} */ ci) => {\n\tif (ci) {\n\t\tstdout.write(`${name} ${color('dim', message)}`)\n\t} else {\n\t\tconst spinner = isWin32 ? '-–—–-' : '⠋⠙⠹⠸⠼⠴⠦⠧⠇⠏'\n\n\t\tlet index = 0\n\n\t\tclearInterval(interval)\n\n\t\t// reset current stream line\n\t\treadline.clearLine(stdout, 0)\n\t\treadline.cursorTo(stdout, 0)\n\n\t\tstdout.write(`${color('yellow', spinner[index])} ${name} ${color('dim', message)}`)\n\n\t\tinterval = setInterval(() => {\n\t\t\tindex = (index + 1) % spinner.length\n\n\t\t\treadline.cursorTo(stdout, 0)\n\n\t\t\tstdout.write(`${color('yellow', spinner[index])} ${name} ${color('dim', message)}`)\n\t\t}, 60)\n\t}\n}\n","import * as exit from './lib/exit.js'\nimport { readOrWriteFile, safelyReadFile, writeFile } from './lib/utils.js'\nimport { getErrorMessage } from './lib/get-error-message.js'\nimport { getOptions } from './lib/get-options.js'\nimport * as log from './lib/log.js'\nimport path from 'path'\n\nconst postcss8 = async (plugins) => {\n\tconst pkg = await import('postcss/package.json')\n\n\tif (pkg.version[0] === '8') {\n\t\tconst m = await import('postcss')\n\t\treturn m.default(plugins)\n\t} else {\n\t\tthrow new Error(`postcss@8 must be installed, found ${pkg.version}`)\n\t}\n}\n\nconst isPostcss8Plugin = (plugin) => typeof plugin === 'function' && Object(plugin).postcss === true\n\ngetOptions().then(\n\tasync options => {\n\t\tlet hadError = false\n\n\t\t// runner\n\t\tfor (const name in options.config) {\n\t\t\tconst test = options.config[name]\n\n\t\t\tconst testBase = name.split(':')[0]\n\t\t\tconst testFull = name.split(':').join('.')\n\n\t\t\t// test paths\n\t\t\tconst sourcePath = path.resolve(options.fixtures, test.source || `${testBase}.css`)\n\t\t\tconst expectPath = path.resolve(options.fixtures, test.expect || `${testFull}.expect.css`)\n\t\t\tconst resultPath = path.resolve(options.fixtures, test.result || `${testFull}.result.css`)\n\n\t\t\tconst processOptions = Object.assign({ from: sourcePath, to: resultPath }, test.processOptions)\n\t\t\tconst pluginOptions = test.options\n\n\t\t\tlet rawPlugin = test.plugin || options.plugin\n\n\t\t\tif (rawPlugin.default) {\n\t\t\t\trawPlugin = rawPlugin.default\n\t\t\t}\n\n\t\t\tconst plugin = isPostcss8Plugin(rawPlugin)\n\t\t\t\t? rawPlugin(pluginOptions)\n\t\t\t: typeof Object(rawPlugin).process === 'function'\n\t\t\t\t? rawPlugin\n\t\t\t: typeof rawPlugin === 'function'\n\t\t\t\t? { process: rawPlugin }\n\t\t\t: Object(rawPlugin).postcssPlugin\n\n\t\t\tconst pluginName = plugin.postcssPlugin || Object(rawPlugin.postcss).postcssPlugin || 'postcss'\n\n\t\t\tlog.wait(pluginName, test.message, options.ci)\n\n\t\t\ttry {\n\t\t\t\tif (Object(test.before) instanceof Function) {\n\t\t\t\t\tawait test.before()\n\t\t\t\t}\n\n\t\t\t\tconst expectCSS = await safelyReadFile(expectPath)\n\t\t\t\tconst sourceCSS = await readOrWriteFile(sourcePath, expectCSS)\n\n\t\t\t\tlet result\n\n\t\t\t\tif (isPostcss8Plugin(rawPlugin)) {\n\t\t\t\t\tconst postcss = await postcss8([ plugin ])\n\n\t\t\t\t\tresult = await postcss.process(sourceCSS, processOptions)\n\t\t\t\t} else {\n\t\t\t\t\tresult = await plugin.process(sourceCSS, processOptions, pluginOptions)\n\t\t\t\t}\n\n\t\t\t\tconst resultCSS = result.css\n\n\t\t\t\tif (options.fix) {\n\t\t\t\t\tawait writeFile(expectPath, resultCSS)\n\t\t\t\t\tawait writeFile(resultPath, resultCSS)\n\t\t\t\t} else {\n\t\t\t\t\tawait writeFile(resultPath, resultCSS)\n\n\t\t\t\t\tif (expectCSS !== resultCSS) {\n\t\t\t\t\t\tthrow new Error([\n\t\t\t\t\t\t\t`Expected: ${JSON.stringify(expectCSS).slice(1, -1)}`,\n\t\t\t\t\t\t\t`Received: ${JSON.stringify(resultCSS).slice(1, -1)}`\n\t\t\t\t\t\t].join('\\n'))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst warnings = result.warnings()\n\n\t\t\t\tif (typeof test.warnings === 'number') {\n\t\t\t\t\tif (test.warnings !== warnings.length) {\n\t\t\t\t\t\tconst s = warnings.length !== 1 ? 's' : ''\n\n\t\t\t\t\t\tthrow new Error(`Expected: ${test.warnings} warning${s}\\nReceived: ${warnings.length} warnings`)\n\t\t\t\t\t}\n\t\t\t\t} else if (warnings.length) {\n\t\t\t\t\tconst areExpectedWarnings = warnings.every(\n\t\t\t\t\t\twarning => test.warnings === Object(test.warnings) && Object.keys(test.warnings).every(\n\t\t\t\t\t\t\tkey => test.warnings[key] instanceof RegExp\n\t\t\t\t\t\t\t\t? test.warnings[key].test(warning[key])\n\t\t\t\t\t\t\t: test.warnings[key] === warning[key]\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\n\t\t\t\t\tif (!areExpectedWarnings) {\n\t\t\t\t\t\tconst s = warnings.length !== 1 ? 's' : ''\n\n\t\t\t\t\t\tthrow new Error(`Unexpected warning${s}:\\n${warnings.join('\\n')}`)\n\t\t\t\t\t}\n\t\t\t\t} else if (test.warnings) {\n\t\t\t\t\tthrow new Error(`Expected a warning`)\n\t\t\t\t} else if (test.errors) {\n\t\t\t\t\tthrow new Error(`Expected an error`)\n\t\t\t\t}\n\n\t\t\t\tif (Object(test.after) instanceof Function) {\n\t\t\t\t\tawait test.after()\n\t\t\t\t}\n\n\t\t\t\tlog.pass(pluginName, test.message, options.ci)\n\t\t\t} catch (error) {\n\t\t\t\tif ('error' in test) {\n\t\t\t\t\tconst isObjectError = test.error === Object(test.error)\n\n\t\t\t\t\tif (isObjectError) {\n\t\t\t\t\t\tconst isExpectedError = Object.keys(test.error).every(\n\t\t\t\t\t\t\tkey => test.error[key] instanceof RegExp\n\t\t\t\t\t\t\t\t? test.error[key].test(Object(error)[key])\n\t\t\t\t\t\t\t: test.error[key] === Object(error)[key]\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tif (isExpectedError) {\n\t\t\t\t\t\t\tlog.pass(pluginName, test.message, options.ci)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst reportedError = Object.keys(test.error).reduce(\n\t\t\t\t\t\t\t\t(reportedError, key) => Object.assign(reportedError, { [key]: Object(error)[key] }),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\thadError = error\n\n\t\t\t\t\t\t\tlog.fail(pluginName, test.message, `  Expected Error: ${JSON.stringify(test.error)}\\n  Received Error: ${JSON.stringify(reportedError)}`, options.ci)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst isExpectedError = typeof test.error === 'boolean' && test.error\n\n\t\t\t\t\t\tif (isExpectedError) {\n\t\t\t\t\t\t\tlog.pass(pluginName, test.message, options.ci)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thadError = error\n\n\t\t\t\t\t\t\tlog.fail(pluginName, test.message, `  Expected Error`, options.ci)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (options.ci) {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thadError = error\n\n\t\t\t\t\tlog.fail(pluginName, test.message, getErrorMessage(error), options.ci)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hadError) {\n\t\t\tthrow hadError\n\t\t}\n\t}\n).then(exit.pass, exit.fail)\n\n"],"names":["fail","error","console","log","process","exit","pass","readFile","pathname","Promise","resolve","reject","fs","data","readJSON","keys","then","JSON","parse","opts","length","Object","find","key","includes","readOrWriteFile","catch","writeFile","safelyReadFile","getErrorMessage","String","message","argRegExp","primativeRegExp","relaxedJsonPropRegExp","relaxedJsonValueRegExp","getOptionsFromArguments","defaultOptions","argv","slice","reduce","args","arg","index","nextIndex","nextArg","argMatch","match","name","test","replace","assign","getOptions","cwd","plugin","config","fixtures","path","options","packageOptions","importedPluginFile","importedPlugin","extname","importedConfig","default","postcssTapeConfigFiles","returnError","postcssTapeConfigFile","shift","colors","reset","bold","dim","underline","blink","reverse","hidden","black","red","green","yellow","blue","magenta","cyan","white","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","color","string","isWin32","platform","tick","cross","stdout","interval","ci","clearInterval","write","readline","clearLine","cursorTo","details","wait","spinner","setInterval","postcss8","plugins","pkg","version","m","Error","isPostcss8Plugin","postcss","hadError","testBase","split","testFull","join","sourcePath","source","expectPath","expect","resultPath","result","processOptions","from","to","pluginOptions","rawPlugin","postcssPlugin","pluginName","before","Function","expectCSS","sourceCSS","resultCSS","css","fix","stringify","warnings","s","areExpectedWarnings","every","warning","RegExp","errors","after","isObjectError","isExpectedError","reportedError"],"mappings":"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"}